<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Simple T99</title>
    <!-- Import all the bootstrap css files from css folder -->
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/custom-styles.css" />    

    <!-- Logo -->
    <link rel="simpleadmin-logo" href="favicon.ico" />

    <!--  Import BootStrap Javascript -->
    <script src="js/auth.js" defer></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/alpinejs.min.js" defer></script>
    <script src="js/esim-config.js" defer></script>
    <script src="js/index-esim.js" defer></script>
    <script src="js/index-process.js"></script>
    <script src="js/atcommand-utils.js"></script>
    <script src="js/dark-mode.js" defer></script>
  </head>
  <body data-require-auth="true">
    <main>
      <div class="container my-4" x-data="processAllInfos()">
      <nav class="navbar navbar-expand-lg mt-2">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">
            <span class="mb-0 h4">Simple T99</span>
          </a>
          <!-- RIGHT CONTROLS (mobile + desktop) -->
          <div class="d-flex align-items-center ms-auto gap-2">
            <!-- Dark mode MOBILE -->
            <button
              id="darkModeToggleMobile"
              class="btn btn-blink d-lg-none"
              type="button"
              aria-label="Toggle dark mode">
              <span class="darkModeIcon">ðŸŒ™</span>
            </button>
            <!-- Hamburger -->
            <button
              class="navbar-toggler"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarText"
              aria-controls="navbarText"
              aria-expanded="false"
              aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Logout MOBILE -->
            <button
              class="btn btn-outline-secondary btn-sm d-lg-none"
              id="logoutButtonMobile"
              type="button"
              aria-label="Logout">
              Logout
            </button>                    
          </div>
          <!-- COLLAPSABLE MENU -->
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item"><a class="nav-link active" href="/">Home</a></li>
              <li class="nav-item" data-role-access="admin"><a class="nav-link" href="/radio-settings.html">Radio Settings</a></li>
              <li class="nav-item" data-role-access="admin"><a class="nav-link" href="/settings.html">System Settings</a></li>
              <li class="nav-item" data-role-access="admin"><a class="nav-link" href="/advanced.html">Advanced</a></li>
              <li class="nav-item"><a class="nav-link" href="/sms.html">SMS</a></li>
              <li class="nav-item"><a class="nav-link" href="/deviceinfo.html">Device Information</a></li>
              <li class="nav-item" id="esimNavItem" style="display: none;" data-role-access="admin"><a class="nav-link" href="/esim.html">eSIM</a></li>                    
            </ul>
            <!-- DESKTOP RIGHT SIDE -->
            <div class="navbar-text d-none d-lg-flex align-items-center gap-3">
              <span class="badge rounded-pill bg-danger fw-semibold text-uppercase" id="navUserRole"></span>
              <span class="fw-semibold" id="navUserName"></span>
              <button class="btn btn-outline-secondary" id="logoutButton">Logout</button>
              <!-- Dark mode DESKTOP -->
              <button
                id="darkModeToggleDesktop"
                class="btn btn-blink btn-sm"
                type="button"
                aria-label="Toggle dark mode">
                <span class="darkModeIcon">ðŸŒ™</span>
              </button>
            </div>
          </div>
        </div>
      </nav>

        <div class="row mt-5 g-3">
          <!-- Temperature Card -->
          <div class="col-6 col-lg-3">
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center justify-content-center">
                <div class="icon-container icon-temp">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="45" height="45">
                    <path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/>
                  </svg>
                </div>
                <h1 class="card-text mt-4" x-text="temperature.replace('C', '') + 'Â°C'"></h1>
              </div>
              <div class="card-footer text-center">Temperature</div>
            </div>
          </div>

          <!-- SIM Status Card -->
          <div class="col-6 col-lg-3">
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center justify-content-center">
                <div class="icon-container icon-sim">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 25" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="45" height="45">
                    <path d="M7 2h7l5 5v15a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/>
                    <path d="M9 14h6M9 11h6M9 8h2"/>
                  </svg>
                </div>
                <h1 class="card-text mt-4" x-text="simStatus"></h1>
              </div>
              <div class="card-footer text-center">SIM Status</div>
            </div>
          </div>

          <!-- Signal Percentage Card -->
          <div class="col-6 col-lg-3">
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center justify-content-center">
                <div class="icon-container icon-signal">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="45" height="45">
                    <path d="M2 20h.01M7 20v-4M12 20v-8M17 20V8M22 4v16"/>
                  </svg>
                </div>
                <h1 class="card-text mt-4" x-text="signalPercentage + '%'"></h1>
              </div>
              <div class="card-footer text-center">Signal Percentage</div>
            </div>
          </div>

          <!-- Internet Connection Card -->
          <div class="col-6 col-lg-3">
            <div class="card">
              <div class="card-body d-flex flex-column align-items-center justify-content-center">
                <div class="icon-container icon-cloud">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="45" height="45">
                    <path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"/>
                  </svg>
                </div>
                <h1 class="card-text mt-4" x-text="internetConnectionStatus"></h1>
              </div>
              <div class="card-footer text-center">Internet Connection</div>
            </div>
          </div>
        </div>

        <div class="row mt-5 gap-3">
          <div class="col">
            <div class="card">
              <div class="card-header">Network & System Information</div>
              <div class="card-body">
                <div class="card-text table-responsive-sm">
                  <table class="table">
                    <tbody>
                      <tr>
                        <th scope="row">Active Sim</th>
                        <td x-text="activeSim"></td>
                      </tr>
                      <tr>
                        <th scope="row">Network Provider</th>
                        <td x-text="networkProvider"></td>
                      </tr>
                      <tr>
                        <th scope="row">MCCMNC</th>
                        <td x-text="mccmnc"></td>
                      </tr>
                      <tr>
                        <th scope="row">APN</th>
                        <td x-text="apn"></td>
                      </tr>
                      <tr>
                        <th scope="row">IPv4</th>
                        <td x-text="ipv4"></td>
                      </tr>
                      <tr>
                        <th scope="row">IPv6</th>
                        <td x-text="ipv6"></td>
                      </tr>
                      <tr>
                        <th scope="row">Uptime</th>
                        <td x-text="uptime"></td>
                      </tr>
                      <tr>
                        <th scope="row">CPU Usage</th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                            getCpuProgressBarClass: function() {
                              var percentage = this.cpuUsage;

                              if (percentage < 50) {
                                return 'progress-bar bg-success is-medium';
                              } else if (percentage < 80) {
                                return 'progress-bar bg-warning is-warning is-medium';
                              }
                              return 'progress-bar bg-danger is-medium';
                            }
                          }"
                        >
                          <div class="progress w-100" role="progressbar" aria-label="CPU usage" aria-valuemin="0" aria-valuemax="100" style="height: 18px">
                            <div
                              :class="getCpuProgressBarClass()"
                              :style="'width: ' + cpuUsage + '%'"
                            >
                              <span x-text="cpuUsage + '%'"></span>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Memory Usage</th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                            getMemProgressBarClass: function() {
                              var percentage = this.memPercent;

                              if (percentage < 50) {
                                return 'progress-bar bg-success is-medium';
                              } else if (percentage < 80) {
                                return 'progress-bar bg-warning is-warning is-medium';
                              }
                              return 'progress-bar bg-danger is-medium';
                            }
                          }"
                        >
                          <div class="progress w-100" role="progressbar" aria-label="Memory usage" aria-valuemin="0" aria-valuemax="100" style="height: 18px">
                            <div
                              :class="getMemProgressBarClass()"
                              :style="'width: ' + memPercent + '%'"
                            >
                              <span x-text="(memUsed / 1024).toFixed(1) + 'MB / ' + (memTotal / 1024).toFixed(1) + 'MB (' + memPercent + '%)'"></span>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Ethernet Speed</th>
                        <td>
                          <span x-text="systemSpeed"></span>
                          <template x-if="systemDuplex !== 'Unknown' && systemDuplex !== ''">
                            <span class="ms-2">
                              <span class="badge" :class="{
                                'bg-success': systemDuplex === 'Full',
                                'bg-warning': systemDuplex === 'Half'
                              }" x-text="systemDuplex + ' Duplex'"></span>
                            </span>
                          </template>
                        </td>
                      </tr>                      
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="card-footer">
                <div class="row row-cols-2">
                  <div class="col">
                    <p class="btn">Refresh Rate (min 3s)</p>
                  </div>
                  <div class="col">
                    <div class="input-group">
                      <input
                        x-model="newRefreshRate"
                        class="form-control"
                        type="number"
                        min="3"
                        max="60"
                        x-bind:placeholder="refreshRate + 's'"
                        data-requires-admin
                      />
                      <button
                        @click="updateRefreshRate()"
                        class="btn btn-outline-secondary"
                        type="button"
                        data-requires-admin
                      >
                        Set
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col">
            <div class="card">
              <div class="card-header">Signal Information</div>
              <div class="card-body">
                <div class="card-text table-responsive-sm">
                  <table class="table">
                    <tbody>
                      <tr>
                        <th scope="row">Assessment</th>
                        <td x-text="signalAssessment"></td>
                      </tr>
                      <tr>
                        <th scope="row">Network Mode</th>
                        <td x-text="networkMode"></td>
                      </tr>
                      <tr>
                        <th scope="row">Bands</th>
                        <td x-text="bands"></td>
                      </tr>
                      <tr>
                        <th scope="row">Bandwidth</th>
                        <td x-text="bandwidth"></td>
                      </tr>
                      <tr>
                        <th scope="row">E/ARFCN<sup>4G/5G</sup></th>
                        <td x-text="earfcns"></td>
                      </tr>
                      <tr>
                        <th scope="row">PCI</th>
                        <td
                          x-show="sccPCI != '-'"
                          x-text="pccPCI + ', ' + sccPCI"
                        ></td>
                        <td x-show="sccPCI == '-'" x-text="pccPCI"></td>
                      </tr>
                      <tr x-show="csq != 'NR-SA Mode'">
                        <th scope="row">CSQ</th>
                        <td x-show="csq != '-'" x-text="csq"></td>
                        <td x-show="csq == '-'" class="fst-italic">None</td>
                      </tr>
                      <tr>
                        <th scope="row">CELL ID</th>
                        <td x-text="cellID"></td>
                      </tr>
                      <tr>
                        <th scope="row">eNB ID <sup>4G/5G</sup></th>
                        <td x-text="eNBID"></td>
                      </tr>
                      <tr>
                        <th scope="row">TAC<sup>4G/5G</sup></th>
                        <td x-text="tac"></td>
                      </tr>
                      <tr x-show="rsrqLTE != '-'">
                        <th scope="row">SS_RSRQ<sup>4G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{ getProgressBarClass: function() {
                          // Remove the percentage sign and convert to integer
                          var percentage = parseInt(this.rsrqLTEPercentage);

                          if (percentage >= 60) {
                              return 'progress-bar bg-success is-medium';
                          } else if (percentage >= 40) {
                              return 'progress-bar bg-warning is-warning is-medium';
                          } else {
                              return 'progress-bar bg-danger is-medium';
                          }
                      } }"
                        >
                          <div
                            x-show="rsrqLTE != '-' && rsrqLTEPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSRQ BAR"
                            :aria-valuenow="rsrqLTEPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rsrqLTEPercentage + '%'"
                            >
                              <span
                                x-text="rsrqLTE + ' / ' +  rsrqLTEPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rsrqLTEPercentage == '0'"
                            x-text="rsrqLTE"
                          ></span>
                          <span x-show="rsrqLTE == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="rsrpLTE != '-'">
                        <th scope="row">RSRP<sup>4G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              // Remove the percentage sign and convert to integer
                              var percentage = parseInt(this.rsrpLTEPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="rsrpLTE != '-' && rsrpLTEPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSRP BAR"
                            :aria-valuenow="rsrpLTEPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rsrpLTEPercentage + '%'"
                            >
                              <span
                                x-text="rsrpLTE + ' / ' + rsrpLTEPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rsrpLTEPercentage == '0'"
                            x-text="rsrpLTE"
                          ></span>
                          <span x-show="rsrpLTE == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="rssiLTE != '-'">
                        <th scope="row">RSSI<sup>4G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              var percentage = parseInt(this.rssiLTEPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="rssiLTE != '-' && rssiLTEPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSSI BAR"
                            :aria-valuenow="rssiLTEPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rssiLTEPercentage + '%'"
                            >
                              <span
                                x-text="rssiLTE + ' / ' + rssiLTEPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rssiLTEPercentage == '0'"
                            x-text="rssiLTE"
                          ></span>
                          <span x-show="rssiLTE == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="sinrLTE != '-'">
                        <th scope="row">SINR<sup>4G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              // Remove the percentage sign and convert to integer
                              var percentage = parseInt(this.sinrLTEPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="sinrLTE != '-' && sinrLTEPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="SINR BAR"
                            :aria-valuenow="sinrLTEPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + sinrLTEPercentage +'%'"
                            >
                              <span
                                x-text="sinrLTE + ' / ' + sinrLTEPercentage +'%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-text="sinrLTE"
                            x-show="sinrLTEPercentage == '0'"
                          ></span>
                          <span x-show="sinrLTE == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="rsrqNR != '-'">
                        <th scope="row">SS_RSRQ<sup>5G</sup></th>
                        <td
                          x-data="{ getProgressBarClass: function() {
                          // Remove the percentage sign and convert to integer
                          var percentage = parseInt(this.rsrqNRPercentage);

                          if (percentage >= 60) {
                              return 'progress-bar bg-success is-medium';
                          } else if (percentage >= 40) {
                              return 'progress-bar bg-warning is-warning is-medium';
                          } else {
                              return 'progress-bar bg-danger is-medium';
                          }
                      } }"
                        >
                          <div
                            x-show="rsrqNR != '-' && rsrqNRPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSRQ BAR"
                            :aria-valuenow="rsrqNRPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rsrqNRPercentage + '%'"
                            >
                              <span
                                x-text="rsrqNR + ' / ' + rsrqNRPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rsrqNRPercentage == '0'"
                            x-text="rsrqNR"
                          ></span>
                          <span x-show="rsrqNR == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="rsrpNR != '-'">
                        <th scope="row">SS_RSRP<sup>5G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              // Remove the percentage sign and convert to integer
                              var percentage = parseInt(this.rsrpNRPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="rsrpNR != '-' && rsrpNRPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSRP BAR"
                            :aria-valuenow="rsrpNRPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rsrpNRPercentage + '%'"
                            >
                              <span
                                x-text="rsrpNR + ' / ' + rsrpNRPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rsrpNRPercentage == '0'"
                            x-text="rsrpNR"
                          ></span>
                          <span x-show="rsrpNR == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="rssiNR != '-'">
                        <th scope="row">RSSI<sup>5G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              var percentage = parseInt(this.rssiNRPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="rssiNR != '-' && rssiNRPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="RSSI BAR"
                            :aria-valuenow="rssiNRPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + rssiNRPercentage + '%'"
                            >
                              <span
                                x-text="rssiNR + ' / ' + rssiNRPercentage + '%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-show="rssiNRPercentage == '0'"
                            x-text="rssiNR"
                          ></span>
                          <span x-show="rssiNR == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                      <tr x-show="sinrNR != '-'">
                        <th scope="row">SINR<sup>5G</sup></th>
                        <td
                          class="gap-4 align-items-center"
                          x-data="{
                          getProgressBarClass: function() {
                              // Remove the percentage sign and convert to integer
                              var percentage = parseInt(this.sinrNRPercentage);

                              if (percentage >= 60) {
                                  return 'progress-bar bg-success is-medium';
                              } else if (percentage >= 40) {
                                  return 'progress-bar bg-warning is-warning is-medium';
                              } else {
                                  return 'progress-bar bg-danger is-medium';
                              }
                          }
                        }"
                        >
                          <div
                            x-show="sinrNR != '-' && sinrNRPercentage != '0'"
                            class="progress w-100"
                            role="progressbar"
                            aria-label="SINR BAR"
                            :aria-valuenow="sinrNRPercentage"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            style="height: 18px"
                          >
                            <div
                              :class="getProgressBarClass()"
                              :style="'width: ' + sinrNRPercentage +'%'"
                            >
                              <span
                                x-text="sinrNR + ' / ' + sinrNRPercentage +'%'"
                              ></span>
                            </div>
                          </div>
                          <span
                            x-text="sinrNR"
                            x-show="sinrNRPercentage == '0'"
                          ></span>
                          <span x-show="sinrNR == '-'" class="fst-italic">
                            None
                          </span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12">
            <div class="card">
              <div
                class="card-header d-flex justify-content-between align-items-center">
                <span>Advanced Signal Details</span>
                <button
                  class="btn btn-sm btn-primary"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#advancedSignalCollapse"
                  aria-expanded="false"
                  aria-controls="advancedSignalCollapse">
                  Show details
                </button>
              </div>
              <div id="advancedSignalCollapse" class="collapse">
                <div class="card-body">
                  <template x-if="detailedSignals.length === 0">
                    <p class="mb-0 text-muted">
                      No advanced details available.
                    </p>
                  </template>

                  <template x-for="(entry, index) in detailedSignals" :key="entry.id ?? index">
                    <div
                      class="mb-4 pb-3 border-bottom"
                      :class="{ 'border-0 pb-0 mb-0': index === detailedSignals.length - 1 }"
                    >
                      <div
                        class="d-flex flex-column flex-md-row justify-content-between align-items-md-start gap-2"
                      >
                        <div>
                          <h5 class="mb-1" x-text="entry.title"></h5>
                          <p class="mb-0 text-muted">
                            <span x-text="'Technology: ' + entry.technology"></span>
                            <span class="ms-3" x-text="'Band: ' + entry.bandDisplay"></span>
                          </p>
                        </div>
                        <div class="text-md-end text-muted small">
                          <div x-text="'PCI: ' + entry.pciDisplay"></div>
                          <div x-text="'Channel: ' + entry.channelDisplay"></div>
                        </div>
                      </div>

                      <div class="row small text-muted mt-2">
                        <div class="col-md-6">
                          <p class="mb-1" x-text="'Bandwidth: ' + entry.bandwidthDisplay"></p>
                        </div>
                        <div class="col-md-6 text-md-end" x-show="entry.rxDiversityDisplay">
                          <p class="mb-1" x-text="'RX Diversity: ' + entry.rxDiversityDisplay"></p>
                        </div>
                      </div>

                      <div class="mt-3">
                        <template x-for="metric in entry.metrics" :key="metric.key">
                          <div class="mb-3">
                            <div class="d-flex justify-content-between">
                              <span class="fw-semibold" x-text="metric.label"></span>
                              <span x-text="metric.display"></span>
                            </div>
                            <template x-if="metric.percentage > 0">
                              <div
                                class="progress"
                                style="height: 18px"
                                role="progressbar"
                                aria-valuemin="0"
                                aria-valuemax="100"
                                :aria-valuenow="metric.percentage"
                              >
                                <div
                                  class="progress-bar"
                                  :class="getProgressBarClass(metric.percentage)"
                                  :style="'width: ' + metric.percentage + '%'"
                                >
                                  <span
                                    x-text="metric.display + ' / ' + metric.percentage + '%'"
                                  ></span>
                                </div>
                              </div>
                            </template>
                            <template x-if="metric.percentage === 0">
                              <span class="fst-italic text-muted">Value not available</span>
                            </template>
                          </div>
                        </template>
                      </div>

                      <template x-if="entry.antennas && entry.antennas.length">
                        <div class="mt-3">
                          <h6 class="fw-semibold">RSRP per Antenna</h6>
                          <template x-for="antenna in entry.antennas" :key="antenna.label">
                            <div class="mb-2">
                              <div class="d-flex justify-content-between small">
                                <span x-text="antenna.label"></span>
                                <span x-text="antenna.display"></span>
                              </div>
                              <template x-if="antenna.percentage > 0">
                                <div
                                  class="progress"
                                  style="height: 12px"
                                  role="progressbar"
                                  aria-valuemin="0"
                                  aria-valuemax="100"
                                  :aria-valuenow="antenna.percentage"
                                >
                                  <div
                                    class="progress-bar"
                                    :class="getProgressBarClass(antenna.percentage)"
                                    :style="'width: ' + antenna.percentage + '%'"
                                  ></div>
                                </div>
                              </template>
                              <template x-if="antenna.percentage === 0">
                                <span class="fst-italic text-muted">Value not available</span>
                              </template>
                            </div>
                          </template>
                        </div>
                      </template>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
