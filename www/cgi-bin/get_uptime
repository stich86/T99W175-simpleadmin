#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
# shellcheck source=/dev/null
. "$SCRIPT_DIR/session_utils.sh"

if ! session_load; then
    printf 'Status: 401 Unauthorized\r\n'
    printf 'Content-type: text/plain\r\n\r\n'
    printf 'Authentication required\n'
    exit 0
fi

# Execute the uptime command and store the result
uptime_output=$(uptime)

# Set header for plain text content
echo "Content-Type: text/plain"
echo ""

# Output the uptime result
echo "$uptime_output"
